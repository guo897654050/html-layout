<!doctype html>
<html class="no-js" lang="en">
	<head>
		<meta charset="utf-8">
		<title>Our first responsive web page with HTML5 and CSS3</title>
		<meta name="description" content="A basic responsive web page – an example from Chapter 1">
		<meta name="viewport" content="width=device-width">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"type="text/javascript"></script>
	<style>

	</style>	
	</head>	
	<body>
		<!--逐帧动画是通过移动背景图片的位置来实现图片的切换-->
		<canvas id="myCanvas" width="1000" height="600" style="background:black">you brower doesn't support Canvas Element</canvas>
	</body>
	<script type="text/javascript">
		let canvas = document.getElementById("myCanvas");
		let context = canvas.getContext("2d");  //返回一个对象，该对象提供了画布上绘制图像的方法和属性，canvas本身没有绘制属性，
		//需要通过它的getContext()来返回可绘制的对象
		let praticles = [];
		for (let i = 0;i < 500; i++) { //生成500粒雪花
			praticles.push({//设置雪花的初始x,y的位置，以及x,y的速度，以及雪花的大小颜色
				x: Math.random()*window.innerWidth,
				y: Math.random()*window.innerHeight,
				vx: (Math.random()*1-.5),//速度-0.5到0.5之间
				vy: (Math.random()*1+.5),
				size: 1+Math.random()*2, //雪花大小
				color: '#'+('00000'+(Math.random()*0x1000000<<0).toString(16)).slice(-6)
				//color: '#fff'
			});
		}
		//上述只是对雪花的一种描述，要使雪花成为看的见的东西需要进行绘制
		function timeUpdate(e) {
			context.clearRect(0, 0, window.innerWidth, window.innerHeight); //清除画布区域
			let praticle;
			for (let i = 0; i < 500; i++) {
				praticle = praticles[i];
				praticle.x += praticle.vx; //更新雪花的新的x,y的位置
				praticle.y += praticle.vy;
				if (praticle.x < 0) {
					praticle.x = window.innerWidth; //当雪花移动到窗口左侧，将其移动到最右侧

				}
				if (praticle.x > window.innerWidth) { //右侧显示在左侧
					praticle.x = 0;
				}
				if (praticle.y >= window.innerHeight) {
					praticle.y = 0;
				}
				context.fillStyle = praticle.color; //雪花颜色
				context.beginPath(); //开始绘制雪花
				context.arc(praticle.x, praticle.y, praticle.size, 0, Math.PI*2); //绘制圆形
				context.closePath(); //闭合路径
				context.fill(); //填充颜色
			}
		}
		setInterval(timeUpdate, 40);//40s刷新一次
	</script>
	</html>
